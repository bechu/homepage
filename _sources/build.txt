Compiler kinav
==============

Dans un premier temps, il est nécessaire de créer l'environnement de travail comme indiqué sur la page tutoriel de ROS : `Wiki ROS <http://wiki.ros.org/>`_ .

Normalement vous devriez avoir ROS d'installé et le répertoire de travail (généralement 
$HOME/catkin_ws/src) paramétré et renseigner dans le .bashrc.

Liste des dépendances
---------------------
 - ros-hydro-desktop-full
 - ros-hydro-turtlebot
 - `SFML 2.1 <http://www.sfml-dev.org>`_

.. warning:: SFML

  Attention il est nécessaire d'installer SFML 2.1, kinav ne compilera pas avec SFML 1.6.


La compilation
--------------

La première chose à faire est de déplacer ou de créer un lien symbolique du répertoire de code source *kinav_msgs*
vers le répertoire de travail de ROS (généralement *$HOME/catkin_ws/src*).

Par exemple :

.. code::

  ln -s /source_code/src/kinav_msgs $HOME/catkin_src/src/kinav_msgs
  cd $HOME/catkin_src
  catkin_make

Puis compiler :  cela aura pour effet de générer les fichiers nécessaires pour l'utilisation des messages spécifiques à kinav.

Si tout se passe bien, nous devrions trouver une arborescence telle que celle-ci (dans $HOME/catkin_src/devel/) :

.. code::

  ├── include
  │   └── kinav_msgs
  │       ├── BagMsg.h
  │       ├── CellMsg.h
  │       ├── CellPartMsg.h
  │       ├── GridMsg.h
  │       └── LocalizedWordMsg.h
 
Ensuite, il faut réaliser l'opération pour tous les autres sous-projets :

.. code::

  ln -s /source_code/src/kinav $HOME/catkin_src/src/
  ln -s /source_code/src/fusion_laserscan $HOME/catkin_src/src/
  ln -s /source_code/src/kinav_launchfiles $HOME/catkin_src/src/
  ln -s /source_code/src/turtlebot $HOME/catkin_src/src/

.. note:: Astuce
  Il est possible pour cette étape d'utiliser le script *install.sh* dans src qui va réaliser cette tâche directement :

  .. code::
  
    ./install.sh /where_is_my_catkin_src/


Et on compile le tout :

.. code::

  cd $HOME/catkin_src
  catkin_make

Voici le contenu final de devel :

.. code::

  ├── include
  │   └── kinav_msgs
  │       ├── BagMsg.h
  │       ├── CellMsg.h
  │       ├── CellPartMsg.h
  │       ├── GridMsg.h
  │       └── LocalizedWordMsg.h
  ├── lib
  │   ├── fusion_laserscan
  │   │   └── fusion_laserscan
  │   ├── kinav
  │   │   ├── editor
  │   │   ├── kinav_node
  │   │   ├── utest
  │   │   ├── viz
  │   │   └── viz_nogui
  │   ├── libkinav_lib.so
  │   ├── libkinav_nodelet.so
